[pytest]
# Pytest配置文件

# 测试文件匹配模式
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 测试目录
testpaths = test_cases

# 命令行选项
addopts =
    # 详细输出
    -v
    # 显示详细的断言信息
    -vv
    # 显示测试执行进度
    --tb=short
    # 显示所有print输出
    -s
    # 显示测试用例的局部变量
    -l
    # 失败后继续执行
    --continue-on-collection-errors
    # 设置allure结果目录
    --alluredir=test_report/allure-results
    # 清理allure结果目录
    --clean-alluredir
    # 显示测试持续时间最长的10个用例
    --durations=10
    # 显示测试覆盖率摘要
    # --cov=.
    # --cov-report=html:test_report/coverage_html
    # --cov-report=term-missing

# 日志配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = logs/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] [%(filename)s:%(lineno)d] %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# 标记定义
markers =
    smoke: 冒烟测试，快速验证核心功能
    regression: 回归测试，全面验证功能
    integration: 集成测试，验证多个模块交互
    unit: 单元测试，验证单个功能点
    critical: 关键功能测试
    high: 高优先级测试
    medium: 中优先级测试
    low: 低优先级测试
    skip: 跳过的测试
    wip: 开发中的测试
    slow: 执行时间较长的测试

# 警告过滤
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# 最小Python版本
minversion = 3.8

# 超时设置（需要安装pytest-timeout）
# timeout = 300
# timeout_method = thread

# 并行执行（需要安装pytest-xdist）
# -n auto 表示自动检测CPU核心数
# 使用方式: pytest -n auto

